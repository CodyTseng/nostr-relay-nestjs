# Example Environment Variables

# Database URL
DATABASE_URL=postgresql://username:xxxxxxxxxx@host:port/database

# Optional: Maximum number of database connections (default: 50)
DATABASE_MAX_CONNECTIONS=50

# Optional: Hostname of the application, used for NIP-42. If not set, NIP-42 is disabled (default: )
# HOSTNAME=nostr-relay.app

# **DEPRECATED** Please use HOSTNAME instead
# DOMAIN=nostr-relay.app

# Optional: Port number for the application (default: 3000)
# PORT=3000

# Optional: Git commit SHA (default: )
# GIT_COMMIT_SHA=

# Optional: Directory for log files (default: )
# LOG_DIR=

# Optional: Log level (default: info)
# LOG_LEVEL=info

# Optional: Threshold for slow execution logging in milliseconds (default: 500)
# LOG_SLOW_EXECUTION_THRESHOLD=500

# Optional: MeiliSearch host (default: )
# MEILI_SEARCH_HOST=

# Optional: MeiliSearch API key (default: )
# MEILI_SEARCH_API_KEY=

# Optional: Comma-separated list of event kinds to sync with MeiliSearch (default: 0,1,30023)
# MEILI_SEARCH_SYNC_EVENT_KINDS=0,1,30023

# Optional: Name of the relay (default: nostr-relay-nestjs)
# RELAY_NAME=nostr-relay-nestjs

# Optional: Description of the relay (default: A Nostr relay with a clear architecture and high test coverage)
# RELAY_DESCRIPTION=A Nostr relay with a clear architecture and high test coverage

# Optional: Public key of the relay (default: )
# RELAY_PUBKEY=

# Optional: Contact information for the relay (default: )
# RELAY_CONTACT=

# Optional: Upper limit for created_at field (default: )
# CREATED_AT_UPPER_LIMIT=

# Optional: Lower limit for created_at field (default: )
# CREATED_AT_LOWER_LIMIT=

# Optional: Minimum proof-of-work difficulty (default: 0)
# MIN_POW_DIFFICULTY=0

# Optional: Maximum number of subscriptions per client (default: 20)
# MAX_SUBSCRIPTIONS_PER_CLIENT=20

# Optional: Blacklist. Comma-separated list of public keys to blacklist (default: )
# BLACKLIST=

# Optional: Whitelist. Comma-separated list of public keys to whitelist (default: )
# WHITELIST=

# Optional: Time-to-live (TTL) for the throttler of RESTful API in milliseconds (default: 1000)
# THROTTLER_TTL=1000

# Optional: Limit for the throttler of RESTful API (default: 100)
# THROTTLER_LIMIT=100

# Optional: Time-to-live (TTL) for the throttler of EVENT requests in milliseconds (default: 1000)
# THROTTLER_EVENT_TTL=1000

# Optional: Limit for the throttler of EVENT requests (default: 10)
# THROTTLER_EVENT_LIMIT=10

# Optional: Block duration for the throttler of EVENT requests in milliseconds (default: 600000)
# THROTTLER_EVENT_BLOCK_DURATION=600000

# Optional: Time-to-live (TTL) for the throttler of REQ requests in milliseconds (default: 100)
# THROTTLER_REQ_TTL=1000

# Optional: Limit for the throttler of REQ requests (default: 10)
# THROTTLER_REQ_LIMIT=10

# Optional: Block duration for the throttler of REQ requests in milliseconds (default: 600000)
# THROTTLER_REQ_BLOCK_DURATION=600000

# Optional: Time-to-live (TTL) for event handling result cache in milliseconds, set to 0 to disable caching (default: 300000)
# EVENT_HANDLING_RESULT_CACHE_TTL=300000

# Optional: Time-to-live (TTL) for filter result cache in milliseconds, set to 0 to disable caching (default: 10000)
# FILTER_RESULT_CACHE_TTL=10000

# Optional: Enable/disable event message handling (default: true)
# EVENT_MESSAGE_HANDLING_ENABLED=true

# Optional: Enable/disable request message handling (default: true)
# REQ_MESSAGE_HANDLING_ENABLED=true

# Optional: Enable/disable close message handling (default: true)
# CLOSE_MESSAGE_HANDLING_ENABLED=true

# Optional: Enable/disable top message handling (default: true)
# TOP_MESSAGE_HANDLING_ENABLED=true

# Optional: Enable/disable auth message handling (default: true)
# AUTH_MESSAGE_HANDLING_ENABLED=true

# Optional: The anchor public key for the Web of Trust. If set, the relay will enable WoT (default: )
# WOT_TRUST_ANCHOR_PUBKEY=

# Optional: The depth of the Web of Trust. 1 means trust anchor and anchor's following, 2 means trust anchor, anchor's following, and anchor's following's following (default: 0)
# WOT_TRUST_DEPTH=

# Optional: The refresh interval for the Web of Trust in milliseconds (default: 3600000 = 1 hour)
# WOT_REFRESH_INTERVAL=

# Optional: Comma-separated list of relay URLs to fetch follow list from (default: )
# WOT_FETCH_FOLLOW_LIST_FROM=

# Optional: JSON string of filters to skip WoT Guard (default: )
# WOT_SKIP_FILTERS=

# WebSocket Security Settings
WS_MAX_MESSAGE_SIZE=65536          # 64KB maximum message size
WS_MAX_CONNECTIONS_PER_IP=10       # Maximum connections per IP
WS_RATE_LIMIT_TTL=60              # Rate limit window in seconds
WS_RATE_LIMIT_COUNT=30            # Maximum messages per window
WS_AUTH_TIMEOUT=30000             # Authentication timeout in milliseconds
WS_MAX_EVENT_SIZE=32768           # 32KB maximum event size
WS_MAX_SUBSCRIPTION_FILTERS=10     # Maximum number of filters per subscription
WS_MAX_FILTER_LENGTH=1024         # Maximum length of each filter